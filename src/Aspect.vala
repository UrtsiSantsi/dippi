namespace Dippi.Utils {
    [Compact (opaque=true)]
    public class Aspect {

        private struct AspectInfo {
            public int width;
            public int height;
            public string aspect_width;
            public string aspect_height;
        }

        // From https://en.wikipedia.org/wiki/List_of_common_resolutions
        private const AspectInfo[] known_aspects = {
            { 512, 192, "4", "3" },
            { 448, 224, "4", "3" },
            { 560, 192, "4", "3" },
            { 400, 270, "3", "2" },
            { 512, 212, "4", "3" },
            { 480, 234, "16", "9" },
            { 480, 250, "4", "3" },
            { 512, 240, "4", "3" },
            { 320, 400, "4", "3" },
            { 640, 200, "4", "3" },
            { 480, 272, "16", "9" },
            { 512, 256, "4", "3" },
            { 640, 256, "4", "3" },
            { 512, 342, "3", "2" },
            { 368, 480, "4", "3" },
            { 496, 384, "4", "3" },
            { 800, 240, "5", "3" },
            { 640, 350, "4", "3" },
            { 480, 500, "4", "3" },
            { 512, 480, "4", "3" },
            { 720, 348, "4", "3" },
            { 720, 350, "4", "3" },
            { 640, 400, "4", "3" },
            { 720, 364, "4", "3" },
            { 640, 512, "4", "3" },
            { 848, 480, "16", "9" },
            { 854, 480, "16", "9" },
            { 960, 544, "16", "9" },
            { 1024, 600, "16", "9" },
            { 1136, 640, "16", "9" },
            { 1138, 640, "16", "9" },
            { 1024, 800, "4", "3" },
            { 1120, 832, "4", "3" },
            { 1334, 750, "16", "9" },
            { 1366, 768, "16", "9" },
            { 1280, 854, "3", "2" },
            { 1440, 1024, "7", "5" },
            { 1776, 1000, "16", "9" },
            { 2048, 1080, "1.90", "1" },
            { 2280, 1080, "2.10", "1" },
            { 2340, 1080, "19½", "9" },
            { 1920, 1400, "7", "5" },
            { 2520, 1080, "21", "9" },
            { 2436, 1125, "2.165", "1" },
            { 2538, 1080, "2.35", "1" },
            { 2560, 1080, "21", "9" },
            { 2256, 1504, "8", "5" },
            { 2576, 1450, "16", "9" },
            { 2960, 1440, "18½", "9" },
            { 2560, 1700, "3", "2" },
            { 3440, 1440, "21", "9" },
            { 2732, 2048, "4", "3" },
            { 3840, 1600, "21", "9" },
            { 4096, 2160, "1.90", "1" },
            { 5120, 2160, "21", "9" },
            { 8192, 4320, "1.90", "1" },
            { 10240, 4320, "21", "9" },
            { 16384, 8640, "1.90", "1" }
        };

        public string get_aspect (int width, int height) {
            foreach (var aspect_info in known_aspects) {
                if (aspect_info.width == width && aspect_info.height == height) {
                    return  aspect_info.aspect_width + _(":") + aspect_info.aspect_height;
                }
            }

            return "";
        }
    }
}
